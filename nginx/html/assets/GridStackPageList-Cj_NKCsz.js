import{d as B,r as C,m as F,q as ee,i as c,j as x,k as t,s as v,e,a as k,g as M,t as O,F as U,b as f,v as N,x as te,O as A,y as G,z as ae,M as oe,h as ne,o as se,w as P,A as le,B as ie,C as ce,I as de,D as _e,L as ue,E as re,G as pe,H as me,p as fe,l as ve,_ as R}from"./index-BoDZPnbd.js";/* empty css              *//* empty css              */import{u as ge,c as we}from"./DefaultLayoutStore-D8wf71kO.js";const ye=f("div",null,"Input page title and select a category",-1),he=B({__name:"CreatePageDialog",props:{show:{type:Boolean,default:!1},done:Function,cancel:Function},setup(u){const s=u,r=C(!1),d=F({title:"",category:""}),I=F([{text:"test1",value:"test1"},{text:"test2",value:"test2"},{text:"test3",value:"test3"},{text:"test4",value:"test4"}]);ee(s,()=>{r.value=s.show});const g=async()=>{if(s.done){const l=await s.done(d);console.log("result",l)}else await new Promise(l=>setTimeout(l,3e3))},p=async()=>{s.cancel&&await s.cancel()};return(l,_)=>{const w=N,y=te,V=A,L=G,S=ae,D=oe;return c(),x(D,{visible:r.value,"onUpdate:visible":_[2]||(_[2]=n=>r.value=n),title:"Modal Form",onCancel:p,onOk:g,draggable:"","unmount-on-close":""},{title:t(()=>[v(" Create new page ")]),default:t(()=>[e(S,{model:d},{default:t(()=>[ye,e(y,{field:"name",label:"Name"},{default:t(()=>[e(w,{modelValue:d.title,"onUpdate:modelValue":_[0]||(_[0]=n=>d.title=n)},null,8,["modelValue"])]),_:1}),e(y,{field:"post",label:"Post"},{default:t(()=>[e(L,{modelValue:d.category,"onUpdate:modelValue":_[1]||(_[1]=n=>d.category=n)},{default:t(()=>[(c(!0),k(U,null,M(I,n=>(c(),x(V,{value:n.value},{default:t(()=>[v(O(n.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}}),be=u=>(fe("data-v-08c7c38a"),u=u(),ve(),u),Ce={class:"full-w px-4"},ke={class:"grid justify-items-end"},Pe={class:"p-2"},xe=["onClick"],Ie=be(()=>f("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),Ve=["onClick"],Le=["onClick"],Se=B({__name:"SimpleListParts",setup(u){const{getPageList:s,savePage:r,getPageById:d,deletePage:I}=ge(),g=C(Array()),p=C(null),l=C(!1),_=C(null),w=ne(),y=async()=>{g.value=await s(),p.value=g.value.map(a=>({id:a.id,editable:!1}))};se(async()=>{await y()});const V=a=>{if(p.value.find(o=>o.id==a&&o.editable))return!0},L=a=>{p.value=p.value.map(o=>(a&&o.id==a?o.editable=!o.editable:o.editable=!1,o))},S=async(a,o)=>{let h=p.value.find(m=>m.editable);if(h){let m=await d(h.id);m.title=a,await r(m)}h.editable=!1},D=()=>{l.value=!0},n=async a=>{if(a.title){const o=we();o.title=a.title,await r(o)}l.value=!1,await w.push({name:"createpage",params:{id:a.id}})},T=()=>{l.value=!1},j=async a=>{await w.push({name:"createpage",params:{id:a}})},q=async a=>{await w.push({name:"page",params:{id:a}})},z=async a=>{await I(a),await y()};return(a,o)=>{const h=le,m=ie,$=ce,H=N,E=de,J=_e,K=ue,Q=re,W=A,X=G,Y=pe,Z=me;return c(),k("div",Ce,[f("div",ke,[f("div",Pe,[e($,null,{default:t(()=>[e(m,{type:"primary",onClick:D},{icon:t(()=>[e(h)]),default:t(()=>[v("Create Page")]),_:1})]),_:1})]),f("div",null,[e(he,{ref_key:"dialogRef",ref:_,show:l.value,done:n,cancel:T},null,8,["show"])])]),e(Z,null,{default:t(()=>[(c(!0),k(U,null,M(g.value,i=>(c(),x(Y,{key:i.id},{actions:t(()=>[f("span",{onClick:P(b=>j(i.id),["prevent"])},[e(E),v("編集")],8,Ve),f("span",{onClick:P(b=>z(i.id),["prevent"])},[e(Q),v("削除")],8,Le),e(X,{style:{width:"220px"},placeholder:"Please select ..."},{default:t(()=>[e(W,{value:!0},{default:t(()=>[v("Change Category")]),_:1})]),_:1})]),default:t(()=>[e(K,null,{title:t(()=>[e($,null,{default:t(()=>[V(i.id)?(c(),x(H,{key:1,style:{width:"320px"},onChange:S,modelValue:i.title,"onUpdate:modelValue":b=>i.title=b},null,8,["modelValue","onUpdate:modelValue"])):(c(),k("a",{key:0,href:"#",onClick:P(b=>q(i.id),["prevent"])},O(i.title),9,xe)),e(m,{onClick:P(b=>L(i.id),["prevent"])},{default:t(()=>[e(E)]),_:2},1032,["onClick"])]),_:2},1024)]),avatar:t(()=>[e(J,{shape:"square"},{default:t(()=>[Ie]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1})])}}}),De=R(Se,[["__scopeId","data-v-08c7c38a"]]),Be={class:"page-list"},$e=B({__name:"GridStackPageList",setup(u){return(s,r)=>(c(),k("div",Be,[e(De)]))}}),Ue=R($e,[["__scopeId","data-v-a4f4934a"]]);export{Ue as default};
