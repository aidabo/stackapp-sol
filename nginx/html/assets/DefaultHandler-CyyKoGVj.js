import{d as y,Y as P,Z as S,Q as H,r as v,q as B,i as I,j as O,k as m,s as b,e as C,$ as N,C as T,M as G,a0 as x,m as U}from"./index-BoDZPnbd.js";/* empty css              */import{b as c,v as V,w as j,d as p}from"./DefaultLayoutStore-D8wf71kO.js";const L=e=>({options:{eventHandler:(e==null?void 0:e.eventHandler)??"DefaultHandler",layoutStore:(e==null?void 0:e.layoutStore)??"DefaultLayoutStore",dataStore:(e==null?void 0:e.dataStore)??"DefaultDataStore"}}),k=Object.freeze(Object.defineProperty({__proto__:null,defaultConfig:L},Symbol.toStringTag,{value:"Module"})),w={gsPageHandler:"__gs_page_handler",gsPageConfigOptions:"__gs_page_config_options__",gsPageConfig:"__gs_page_config__"};function A(e){const t=Object.assign({alias:"GridLayoutConfig"},typeof e=="function"?e():e);console.log("***options",t);const a=L(t.config||{}).options;t.config={rootConfig:a},H(w.gsPageConfigOptions,t),H(w.gsPageConfig,a)}const E=y(function(t,{slots:a,attrs:n}){const i={};return t.config&&A(t.config),()=>a.default?a.default(i).map(r=>S(r,{...n,...r.props})):null},{props:["config"],name:"GridLayoutProvider",inheritAttrs:!1}),ee=y(async function(t,a){let n={};if(t.configFile){const r=await import(t.configFile);n="default"in r?r.default:r}if(console.log("config",n),typeof n=="function"&&(n=n()),t.defaultConfig??!0){const{defaultConfig:r}=await P(async()=>{const{defaultConfig:l}=await Promise.resolve().then(()=>k);return{defaultConfig:l}},[]);n=r(n).options}return console.log("now config",n),()=>S(E,{...a.attrs,config:n},a.slots)},{props:["defaultConfig","configFile"],inheritAttrs:!1}),te=y({__name:"PageInfoDialog",props:{show:{type:Boolean,default:!1},items:{type:Object,default:[]}},setup(e){const t=e,a=v(!1),n=v("");B(t,()=>{a.value=t.show,n.value=JSON.stringify(t.items||[],null,"  ")});const i=async()=>{a.value=!1};return(r,l)=>{const h=N,_=T,D=G;return I(),O(D,{visible:a.value,"onUpdate:visible":l[1]||(l[1]=f=>a.value=f),onOk:i,draggable:"","unmount-on-close":"","hide-cancel":!0},{title:m(()=>[b(" Page Layout Info ")]),default:m(()=>[C(_,{direction:"vertical",size:"large",fill:""},{default:m(()=>[C(h,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=f=>n.value=f),class:"h-80","allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"])}}}),u=`${j}/comp_data`,F=x("defaultDataStore",{state:()=>({dataList:[]}),getters:{get:e=>t=>e.dataList.find(a=>a.id===t)},actions:{async getDataList(){return await c.get(`${u}`).then(e=>(this.dataList=e.data,e.data)).catch(e=>(console.log(e),!1))},async getDataById(e){return await c.get(`${u}/${e}`).then(t=>t.data).catch(t=>(console.log(t),!1))},async getDataByName(e){return await c.get(`${u}?cname=${e}`).then(t=>t.data).catch(t=>(console.log(t),!1))},async getDataByCid(e){return await c.get(`${u}?cid=${e}`).then(t=>t.data).catch(t=>(console.log(t),!1))},async getDataByAliasName(e){return await c.get(`${u}?cname=${e}`).then(t=>t.data).catch(t=>(console.log(t),!1))},async exists(e){return await this.getDataById(e)!=null},async saveData(e,t,a){try{return!e.id||!await this.exists(e.id)?await this.insertData(e,t,a):await this.updateData(e,t,a)}catch{return!1}},async insertData(e,t,a){const n="POST";e.id||(e.id=V()),a&&(e.cname=a),t&&(e.cid=t);const i=JSON.stringify(e),r=p;return await c.post(`${u}`,i,{method:n,headers:r}).then(l=>l.data).catch(l=>(console.log(l),!1))},async updateData(e,t,a){const n="PUT";a&&(e.cname=a),t&&(e.cid=t);const i=JSON.stringify(e),r=p;return await c.patch(`${u}/${e.id}`,i,{method:n,headers:r}).then(l=>l.data).catch(l=>(console.log(l),!1))},async deleteData(e){const t="DELETE",a=p;return await c.delete(`${u}/${e}`,{method:t,headers:a}).then(n=>n.data).catch(n=>(console.log(n),!1))}}}),J=()=>{const e={...F()},t=e.getDataById,a=async n=>(console.log("****This is TestDataStore GetDataById "),await t(n));return e.getDataById=a,{...e}},ae=(e,t,a,n,i,r)=>{const{getDataById:l,getDataByName:h,getDataByCid:_,getDataList:D,saveData:f,deleteData:$}=J(),g=U({invoke:(o,s,d)=>{}});return{loadHandler:async(o,s)=>{if(console.log("default loadHandler event called",o.data),o.data.id){const d=await l(o.data.id);s&&s(d)}},saveHandler:async(o,s)=>{console.log("default saveHandler event called",o.data),o.data.cname=o.cname,o.data.aliasName=o.aliasName;const d=await f(o.data,o.cid);s&&s(d)},itemChangedHandler:async(o,s)=>{console.log("default itemChangedHandler event received: ",o.cid,o.data),s&&s(!0)},deleteHandler:async(o,s)=>{console.log("default deleteHandler event called",o.data);const d=await $(o.data.id);s&&s(d)},uploadHandler:(o,s)=>{console.log("default uploadHandler event called",o.data),s&&s(!0)},callHandler:(o,s)=>{console.log("default optionHandler event called",o.data),s&&s(!0)},invoke:async(o,s,d)=>{if(g.invoke)return await g.invoke(o,s,d)},fns:g}};export{ee as G,te as _,w as e,ae as u};
