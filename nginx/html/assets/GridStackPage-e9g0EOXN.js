/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{d as Y,r as c,u as Z,h as ee,K as te,N as ae,m as se,Q as oe,o as ne,T as b,n as H,i as u,a as m,b as s,t as ie,e as n,k as l,w,f as F,F as G,g as le,j as re,S as ce,V as de,C as ue,I as pe,p as fe,l as _e,_ as me}from"./index-D360syNw.js";import{g as ve,_ as ge}from"./base64-CBHBPIpA.js";import{c as he,u as we}from"./DefaultLayoutStore-kdmfUuRD.js";import{u as xe,_ as ye,e as Se,a as be}from"./DynamicLoader-DoX2xiRE.js";const x=p=>(fe("data-v-35e36606"),p=p(),_e(),p),Pe={class:"flex justify-between align-items-center bg-blue-600 text-white"},ke={class:"ml-4 flex-1"},Ie={class:"text-lg font-bold"},Ce={class:"flex justify-between align-items-center"},Ne=x(()=>s("span",null,[s("i",{class:"fa-solid fa-fire"})],-1)),je=[Ne],Be=x(()=>s("span",null,[s("i",{class:"fa-solid fa-circle-info"})],-1)),De=[Be],Ee={class:"p-3"},He=x(()=>s("i",{class:"fa fa-arrow-circle-left text-2xl","aria-hidden":"true"},null,-1)),Fe=[He],Ge={class:"page-show"},Oe=x(()=>s("div",{class:"flex flex-col justify-end align-items-center mb-5"},[s("div")],-1)),$e=Y({__name:"GridStackPage",props:{id:{type:String,default:""}},async setup(p,{expose:O}){let v,P;const k=p,g=c([]),f=c([]),i=c(he()),y=c(!0),d=Z(),I=ee(),$=t=>e=>{e&&(f.value[t]||(f.value[t]=e))},R=te(Se.gsPageConfigOptions,!1),{imports:V}=be(),h=([v,P]=ae(()=>V(R)),v=await v,P(),v),{getPageById:J}=h?h.layoutStore():we(),C=h?h.eventHandler():xe(),N=async(t,e,a)=>await q(t,e,a);C.fns.invoke=N;const L=se({...C});oe("__page_handlers",L);const S=c(!1),M=c(!0),j=c(!1),B=c([]);ne(async()=>{d.params.id&&d.fullPath.match(/\/page\/r/)?await D(d.params.id):d.params.id&&d.fullPath.match(/\/page\/p/)?await T(d.params.id):k.id?await D(k.id):b.warning("No page id specified!")});const T=async t=>{let e=localStorage.getItem(t);if(e){i.value=JSON.parse(ve.decode(e));const a=i.value.grids;g.value=a.map(o=>o.id),H(async()=>{await E(a)}),S.value=!0}else b.warning("No page id or page data found: "+t)},D=async t=>{const e=await J(t);e?(i.value=e,g.value=i.value.grids.map(a=>a.id),H(async()=>{await E(i.value.grids)})):b.warning("No page id found: "+t)},E=async t=>{f.value.forEach((e,a)=>{if(e){const o=t[a];e.load(o.items)}else e.load({id:1,x:2,y:1,h:2})})},A=async t=>{await I.push({name:"createpage",params:{id:t}})},z=t=>{I.push({name:"createpageback",params:{id:i.value.id}})},K=()=>{const t=Array();f.value.forEach((a,o)=>{a&&t.push({id:g.value[o],items:a.save()})});const e=JSON.parse(JSON.stringify(i.value));return e.grids=t,e},Q=()=>{B.value=K(),j.value=!0},W=(t,e)=>f.value.map(a=>a.findCompFn(t,e)).flatMap(a=>a),q=async(t,e,a)=>{const o=W(t,e).map(_=>{let r=_.f(e,a);return r instanceof Promise?r:Promise.resolve(r)});return await Promise.all(o).then(_=>Promise.resolve(_))},U=async()=>{(await N("test2",{cid:"",data:"test data in create! "})).forEach(e=>alert(e))};return O({}),(t,e)=>{const a=de,o=ue,_=pe;return u(),m(G,null,[s("div",Pe,[s("div",ke,[s("h1",Ie,ie(i.value.title),1)]),s("div",Ce,[n(o,{class:"mx-3 text-2xl font-bold"},{default:l(()=>[n(a,{content:"just for test"},{default:l(()=>[s("button",{onClick:e[0]||(e[0]=w(r=>U(),["prevent"]))},je)]),_:1})]),_:1}),n(o,{class:"mx-3 text-2xl font-bold"},{default:l(()=>[n(a,{content:"Show page info"},{default:l(()=>[s("button",{onClick:w(Q,["prevent"])},De)]),_:1}),n(ye,{show:j.value,items:B.value},null,8,["show","items"])]),_:1}),n(o,{class:"mx-3 text-2xl font-bold"},{default:l(()=>[n(a,{content:"Page preview"},{default:l(()=>[y.value&&!S.value&&M.value?(u(),m("button",{key:0,onClick:e[1]||(e[1]=w(r=>A(i.value.id),["prevent"]))},[s("span",Ee,[n(_,{size:"25"})])])):F("",!0)]),_:1})]),_:1}),n(o,{class:"mx-3 text-2xl font-bold"},{default:l(()=>[n(a,{content:"Go back to page design"},{default:l(()=>[y.value&&S.value?(u(),m("button",{key:0,onClick:e[2]||(e[2]=w(r=>z(-1),["prevent"])),class:"text-stone-200 font-bold py-2 px-4 rounded hover:text-white"},Fe)):F("",!0)]),_:1})]),_:1})])]),s("div",Ge,[(u(!0),m(G,null,le(g.value,(r,X)=>(u(),m("div",null,[(u(),re(ce,null,{default:l(()=>[n(ge,{id:r,ref_for:!0,ref:$(X),pageProps:i.value,pageStatic:y.value},null,8,["id","pageProps","pageStatic"])]),_:2},1024))]))),256)),Oe])],64)}}}),Ke=me($e,[["__scopeId","data-v-35e36606"]]);export{Ke as G};
