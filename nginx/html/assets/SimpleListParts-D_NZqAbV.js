/* empty css              *//* empty css              *//* empty css              */import{d as M,r as C,L as F,w as Z,b as u,l as x,m as t,k as v,i as a,e as P,v as $,A as U,F as N,f as p,D as O,a2 as ee,a4 as j,a5 as A,ae as te,M as ae,z as oe,o as ne,q as k,af as se,B as le,S as ie,E as ce,ag as de,ah as ue,I as _e,ai as re,aj as pe,p as me,j as fe,_ as ve}from"./index-wkNrGTcD.js";import{u as ge}from"./pagelayout-Bx_9_lq0.js";/* empty css              */import{v as we}from"./v4-DvF23Exx.js";const ye=p("div",null,"Input page title and select a category",-1),he=M({__name:"CreatePageDialog",props:{show:{type:Boolean,default:!1},done:Function,cancel:Function},setup(m){const i=m,f=C(!1),c=F({title:"",category:""}),I=F([{text:"test1",value:"test1"},{text:"test2",value:"test2"},{text:"test3",value:"test3"},{text:"test4",value:"test4"}]);Z(i,()=>{f.value=i.show});const g=async()=>{if(i.done){const s=await i.done(c);console.log("result",s)}else await new Promise(s=>setTimeout(s,3e3))},_=async()=>{i.cancel&&await i.cancel()};return(s,d)=>{const w=O,y=ee,V=j,L=A,S=te,D=ae;return u(),x(D,{visible:f.value,"onUpdate:visible":d[2]||(d[2]=o=>f.value=o),title:"Modal Form",onCancel:_,onOk:g,draggable:"","unmount-on-close":""},{title:t(()=>[v(" Create new page ")]),default:t(()=>[a(S,{model:c},{default:t(()=>[ye,a(y,{field:"name",label:"Name"},{default:t(()=>[a(w,{modelValue:c.title,"onUpdate:modelValue":d[0]||(d[0]=o=>c.title=o)},null,8,["modelValue"])]),_:1}),a(y,{field:"post",label:"Post"},{default:t(()=>[a(L,{modelValue:c.category,"onUpdate:modelValue":d[1]||(d[1]=o=>c.category=o)},{default:t(()=>[(u(!0),P(N,null,$(I,o=>(u(),x(V,{value:o.value},{default:t(()=>[v(U(o.text),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])}}}),be=m=>(me("data-v-0de759e3"),m=m(),fe(),m),Ce={class:"full-w px-4"},ke={class:"grid justify-items-end"},Pe={class:"p-2"},xe=["onClick"],Ie=be(()=>p("img",{alt:"avatar",src:"https://p1-arco.byteimg.com/tos-cn-i-uwbnlip3yd/3ee5f13fb09879ecb5185e440cef6eb9.png~tplv-uwbnlip3yd-webp.webp"},null,-1)),Ve=["onClick"],Le=["onClick"],Se=M({__name:"SimpleListParts",setup(m){const{getPageList:i,savePage:f,getPageById:c,deletePage:I}=ge(),g=C(Array()),_=C(null),s=C(!1),d=C(null),w=oe(),y=async()=>{g.value=await i(),_.value=g.value.map(e=>({id:e.id,editable:!1}))};ne(async()=>{await y()});const V=e=>{if(_.value.find(n=>n.id==e&&n.editable))return!0},L=e=>{_.value=_.value.map(n=>(e&&n.id==e?n.editable=!n.editable:n.editable=!1,n))},S=async(e,n)=>{let h=_.value.find(r=>r.editable);if(h){let r=await c(h.id);r.title=e,await f(r)}h.editable=!1},D=()=>{s.value=!0},o=async e=>{e.title&&(e.id=we(),await f(e)),s.value=!1,await w.push({name:"createpage",params:{id:e.id}})},R=()=>{s.value=!1},T=async e=>{await w.push({name:"createpage",params:{id:e}})},q=async e=>{await w.push({name:"page",params:{id:e}})},z=async e=>{await I(e),await y()};return(e,n)=>{const h=se,r=le,B=ie,G=O,E=ce,H=de,J=ue,K=_e,Q=j,W=A,X=re,Y=pe;return u(),P("div",Ce,[p("div",ke,[p("div",Pe,[a(B,null,{default:t(()=>[a(r,{type:"primary",onClick:D},{icon:t(()=>[a(h)]),default:t(()=>[v("Create Page")]),_:1})]),_:1})]),p("div",null,[a(he,{ref_key:"dialogRef",ref:d,show:s.value,done:o,cancel:R},null,8,["show"])])]),a(Y,null,{default:t(()=>[(u(!0),P(N,null,$(g.value,l=>(u(),x(X,{key:l.id},{actions:t(()=>[p("span",{onClick:k(b=>T(l.id),["prevent"])},[a(E),v("編集")],8,Ve),p("span",{onClick:k(b=>z(l.id),["prevent"])},[a(K),v("削除")],8,Le),a(W,{style:{width:"220px"},placeholder:"Please select ..."},{default:t(()=>[a(Q,{value:!0},{default:t(()=>[v("Change Category")]),_:1})]),_:1})]),default:t(()=>[a(J,null,{title:t(()=>[a(B,null,{default:t(()=>[V(l.id)?(u(),x(G,{key:1,style:{width:"320px"},onChange:S,modelValue:l.title,"onUpdate:modelValue":b=>l.title=b},null,8,["modelValue","onUpdate:modelValue"])):(u(),P("a",{key:0,href:"#",onClick:k(b=>q(l.id),["prevent"])},U(l.title),9,xe)),a(r,{onClick:k(b=>L(l.id),["prevent"])},{default:t(()=>[a(E)]),_:2},1032,["onClick"])]),_:2},1024)]),avatar:t(()=>[a(H,{shape:"square"},{default:t(()=>[Ie]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1})])}}}),Ne=ve(Se,[["__scopeId","data-v-0de759e3"]]);export{Ne as default};
