/* empty css              *//* empty css              *//* empty css              */import{d as O,r as f,w as R,b as d,l as k,m as a,k as $,i as n,T as ue,S as F,M as pe,e as g,q as _,f as e,I as fe,B as W,P as H,o as _e,s as D,t as ve,F as N,v as J,u as U,n as q,x as V,y as me,z as ge,A as L,C as he,p as ye,j as xe,N as I,D as we,E as be,G as ke,H as Ce,J as Se,_ as Ie}from"./index-wkNrGTcD.js";import{c as Pe,_ as Ee,a as Ge}from"./GridEvent-DN1BR2fK.js";import{u as Ve}from"./pagelayout-Bx_9_lq0.js";import{u as $e,g as De}from"./GridStackItem-DslgcUYb.js";/* empty css              */import"./v4-DvF23Exx.js";const Ne=O({__name:"PageInfoDialog",props:{show:{type:Boolean,default:!1},items:{type:Object,default:[]}},setup(h){const l=h,i=f(!1),o=f();R(l,()=>{i.value=l.show,o.value=JSON.stringify(l.items||[],null,"  ")});const u=async()=>{i.value=!1};return(C,v)=>{const P=ue,y=F,S=pe;return d(),k(S,{visible:i.value,"onUpdate:visible":v[1]||(v[1]=b=>i.value=b),onOk:u,draggable:"","unmount-on-close":"","hide-cancel":"true"},{title:a(()=>[$(" Page Layout Info ")]),default:a(()=>[n(y,{direction:"vertical",size:"large",fill:""},{default:a(()=>[n(P,{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=b=>o.value=b),class:"h-80","allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"])}}}),Oe={class:"absolute top-1 right-1 text-xl"},ze={key:1,class:"flex flex-col"},Be={class:"size-30"},Me=O({__name:"GridMenu",props:{gridId:{type:String,required:!0}},emits:["grid:remove"],setup(h,{emit:l}){const i=h,o=l,u=f(!1),C=()=>{u.value=!u.value},v=()=>{o("grid:remove",i.gridId),u.value=!u.value};return(P,y)=>{const S=fe,b=W,x=H;return d(),g("div",Oe,[u.value?(d(),g("div",ze,[e("div",Be,[n(x,{content:"Are you sure you want to delete grid ",type:"info",onOk:v},{default:a(()=>[n(b,{type:"secondary",class:"text-lg"},{default:a(()=>[n(S),$("Delete")]),_:1})]),_:1})])])):(d(),g("i",{key:0,class:"fa-solid fa-pen-to-square grid-menu",onClick:_(C,["prevent"])}))])}}}),p=h=>(ye("data-v-59e18365"),h=h(),xe(),h),Te={class:"flex"},Ae={class:"flex-none"},je=p(()=>e("i",{class:"fa fa-solid fa-square-share-nodes"},null,-1)),Je=[je],Ue={class:"flex-initial"},qe=p(()=>e("i",{class:"fa fa-solid fa-save"},null,-1)),Le=[qe],Re={class:"flex-initial"},Fe=p(()=>e("i",{class:"fa fa-solid fa-refresh"},null,-1)),We=[Fe],He={class:"flex-initial"},Ke=p(()=>e("i",{class:"fa fa-solid fa-eraser"},null,-1)),Qe=[Ke],Xe={class:"flex-initial"},Ye=p(()=>e("i",{class:"fa fa-solid fa-arrow-left"},null,-1)),Ze=[Ye],et=p(()=>e("div",{id:"trash",style:{padding:"5px","margin-bottom":"10px"},class:"text-center text-white bg-amber-400"},[e("div",null,[e("i",{class:"fa fa-solid fa-trash",style:{"font-size":"250%"}})]),e("div",{class:"py-5"},[e("span",null,"Drop here to remove!")])],-1)),tt={class:"newWidget grid-stack-item grid-custom"},st=["gscomponent"],ot=p(()=>e("div",null,[e("i",{class:"fa fa-solid fa-plus",style:{"font-size":"200%"}})],-1)),at={class:"h-10"},nt={class:"size-8 my-4"},lt={class:"flex justify-between align-items-center bg-blue-600 text-white"},it={class:"ml-4 flex-1"},ct={class:"m-1"},dt=p(()=>e("i",{class:"fa fa-arrow-circle-right","aria-hidden":"true"},null,-1)),rt=[dt],ut={key:0},pt=p(()=>e("i",{class:"fa fa-solid fa-plus text-white size-6 justify-center mt-2"},null,-1)),ft=p(()=>e("span",{class:"text-white"},"Increase Grid",-1)),_t={class:"flex justify-between align-items-center"},vt=p(()=>e("span",null,[e("i",{class:"fa-solid fa-circle-info"})],-1)),mt=[vt],gt=p(()=>e("span",null,[e("i",{class:"fa-solid fa-eye"})],-1)),ht=[gt],yt=p(()=>e("div",{class:"flex flex-col justify-end align-items-center mb-5"},[e("div")],-1)),xt=O({__name:"GridStackMultiCreate",setup(h){const l=f([]),i=f([]),o=f(Pe()),u=f(!1),C=me(),v=ge(),P=s=>t=>{t&&(i.value[s]||(i.value[s]=t))},y=f(!1),S=()=>{y.value=!y.value},b=()=>{y.value=!y.value},x=f({float:!1,compact:!1}),z=f(!1),B=f(),{savePage:K,getPageById:M}=Ve(),{gsComponentData:Q,gsGetComponentInfo:X}=$e(),E=f(250);_e(async()=>{if(C.params.id){o.value=await M(C.params.id);const s=o.value.grids||o.value.gsComponents||[];l.value=s.map(t=>t.id),D(async()=>{await T()})}else{const s=o.value.grids||o.value.gsComponents||[];l.value=s.map(t=>t.id)}}),ve(()=>{console.log("unmount called...")});const Y=()=>{E.value=250},Z=()=>{E.value=0},T=async()=>{o.value=await M(o.value.id),i.value.forEach((s,t)=>{if(s){const r=(o.value.grids||o.value.gsComponents||[]).find(m=>m.id==l.value[t]);r?s.load(r.items):s.load({id:1,x:2,y:1,h:2})}})},A=async(s=!1)=>{const t=Array();i.value.forEach((r,m)=>{r&&t.push({id:l.value[m],items:r.save()})}),o.value.grids=t,await K(o.value),s||I.success({id:"page_create_save",title:"Success",content:"Saved successfully!"})},ee=async()=>{i.value.forEach((s,t)=>{s&&s.clear()})},te=async()=>{const s=o.value.id,t=Array();i.value.forEach((m,w)=>{m&&t.push({id:l.value[w],items:m.save()})});let r=De.encode(JSON.stringify(t));localStorage.setItem(s,r),v.push({name:"preview",params:{id:s}})},se=async()=>{o.value.status="published",await A(!0),I.success({id:"page_create_publish",title:"Success",content:"Published successfully!"}),setTimeout(()=>{const s=o.value.id;v.push({name:"page",params:{id:s}})},1500)},oe=()=>{v.push({name:"pagelist"})};R(x.value,()=>{i.value.forEach((s,t)=>{s&&(s.float(x.value.float),x.value.compact&&s.compact(x.value.compact))})},{deep:!0});const ae=()=>{const s=Array();i.value.forEach((r,m)=>{r&&s.push({id:l.value[m],items:r.save()})});const t=JSON.parse(JSON.stringify(o.value));t.grids=s,B.value=t,z.value=!0},ne=()=>{const s=Ge();l.value.push(s.id),D(()=>{})},le=async s=>{if(l.value.length==1)I.error({id:"delete_grid",title:"Error",content:"Only one grid in the layout, ignore delete!"});else if(l.value.find(t=>t==s)){const t=l.value.findIndex(r=>r==s);try{i.value[t].destroyGrid(),i.value.splice(t,1),l.value.splice(t,1)}catch{I.error({id:"delete_grid",title:"Error",content:"Grid deleted from layout error: "+s})}D(()=>{I.success({id:"delete_grid",title:"Success",content:"Grid deleted from layout: "+s})})}};return(s,t)=>{const r=we,m=be,w=F,ie=ke,j=W,G=Ce,ce=Se,de=H;return d(),g(N,null,[e("div",{id:"pageSidenav",class:"sidenav",style:q({width:E.value+"px"})},[e("div",Te,[e("div",Ae,[e("a",{href:"#",class:"mybtn",onClick:t[0]||(t[0]=_(c=>se(),["prevent"]))},Je)]),e("div",Ue,[e("a",{href:"#",class:"mybtn",onClick:t[1]||(t[1]=_(c=>A(),["prevent"]))},Le)]),e("div",Re,[e("a",{href:"#",class:"mybtn",onClick:t[2]||(t[2]=_(c=>T(),["prevent"]))},We)]),e("div",He,[e("a",{href:"#",class:"mybtn",onClick:t[3]||(t[3]=_(c=>ee(),["prevent"]))},Qe)]),e("div",Xe,[e("a",{href:"#",class:"mybtn",onClick:t[4]||(t[4]=_(c=>Z(),["prevent"]))},Ze)])]),e("div",null,[et,(d(!0),g(N,null,J(U(Q),c=>(d(),g("div",tt,[e("div",{class:"grid-stack-item-content drag",gscomponent:U(X)(c.name)},[ot,e("div",at,[e("span",nt,L(c.description),1)])],8,st)]))),256))])],4),e("div",lt,[e("div",it,[e("h1",ct,[e("button",{class:"text-stone-200 font-bold py-2 px-4 rounded hover:text-white",onClick:_(Y,["prevent"])},rt),n(w,{class:"ml-64 text-lg font-bold"},{default:a(()=>[y.value?(d(),k(r,{key:1,onChange:b,style:{width:"320px"},modelValue:o.value.title,"onUpdate:modelValue":t[5]||(t[5]=c=>o.value.title=c)},null,8,["modelValue"])):(d(),g("span",ut,L(o.value.title),1)),n(m,{class:"size-5 cursor-pointer",onClick:_(S,["prevent"])})]),_:1}),n(w,{class:"mx-8 text-lg"},{default:a(()=>[$(" Compact "),n(ie,{class:"mx-3",modelValue:x.value.compact,"onUpdate:modelValue":t[6]||(t[6]=c=>x.value.compact=c),"checked-color":"#14C9C9","unchecked-color":"lightgray"},null,8,["modelValue"])]),_:1}),u.value?V("",!0):(d(),k(w,{key:0,class:"mx-3 text-2xl font-bold",onClick:t[7]||(t[7]=_(c=>ne(),["prevent"]))},{default:a(()=>[n(G,{content:"Add a grid into layout"},{default:a(()=>[n(j,{type:"outline"},{icon:a(()=>[pt]),default:a(()=>[ft]),_:1})]),_:1})]),_:1}))])]),e("div",_t,[n(w,{class:"mx-3 text-2xl font-bold"},{default:a(()=>[n(G,{content:"Show page info"},{default:a(()=>[e("button",{onClick:_(ae,["prevent"])},mt)]),_:1}),n(Ne,{show:z.value,items:B.value},null,8,["show","items"])]),_:1}),n(w,{class:"mx-3 text-2xl font-bold"},{default:a(()=>[n(G,{content:"Page Preview"},{default:a(()=>[u.value?V("",!0):(d(),g("button",{key:0,onClick:t[8]||(t[8]=_(c=>te(),["prevent"]))},ht))]),_:1})]),_:1}),u.value?V("",!0):(d(),k(w,{key:0,class:"mx-3 text-2xl font-bold"},{default:a(()=>[n(G,{content:"Exit page design"},{default:a(()=>[n(de,{content:"Are you sure you want to exit ",type:"info",onOk:oe},{default:a(()=>[n(j,{type:"outline",status:"warning"},{icon:a(()=>[n(ce)]),default:a(()=>[$("Exit Design")]),_:1})]),_:1})]),_:1})]),_:1}))])]),e("div",{class:"page-create",style:q({marginLeft:E.value+"px"})},[(d(!0),g(N,null,J(l.value,(c,re)=>(d(),g("div",null,[(d(),k(he,null,{default:a(()=>[(d(),k(Ee,{id:c,ref_for:!0,ref:P(re),pageProps:o.value,pageStatic:u.value,key:c},{menu:a(()=>[u.value?V("",!0):(d(),k(Me,{key:0,gridId:c,"onGrid:remove":le},null,8,["gridId"]))]),_:2},1032,["id","pageProps","pageStatic"]))]),_:2},1024))]))),256)),yt],4)],64)}}}),Vt=Ie(xt,[["__scopeId","data-v-59e18365"]]);export{Vt as default};
