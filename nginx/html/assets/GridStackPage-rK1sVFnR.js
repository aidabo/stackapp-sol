import{d as j,r as s,o as N,s as h,e as c,f as a,A as R,q as x,i as y,x as w,F as S,v as G,y as V,z as $,b as l,l as z,m as F,C as L,p as M,j as q,E as A,_ as D}from"./index-wkNrGTcD.js";import{c as H,_ as J}from"./GridEvent-DN1BR2fK.js";import{u as O}from"./pagelayout-Bx_9_lq0.js";import{g as T}from"./GridStackItem-DslgcUYb.js";import"./v4-DvF23Exx.js";const P=u=>(M("data-v-a70fc6ef"),u=u(),q(),u),W={class:"flex justify-between align-items-center bg-blue-600 text-white"},K={class:"ml-4 flex-1"},Q={class:"text-lg font-bold"},U={class:"flex justify-between align-items-center"},X={class:"p-3"},Y=P(()=>a("i",{class:"fa fa-arrow-circle-left text-2xl","aria-hidden":"true"},null,-1)),Z=[Y],ee={class:"page-show"},te=P(()=>a("div",{class:"flex flex-col justify-end align-items-center mb-5"},[a("div")],-1)),ae=j({__name:"GridStackPage",setup(u){const d=s([]),p=s([]),o=s(H()),f=s(!0),i=V(),_=$(),b=e=>t=>{t&&(p.value[e]||(p.value[e]=t))},{getPageById:k}=O(),v=s(!1),m=s(!1),I=s(!0);N(async()=>{if(i.params.id&&i.fullPath.match(/\/page\/r/))o.value=await k(i.params.id),d.value=o.value.grids.map(e=>e.id),h(async()=>{await g(o.value.grids)}),v.value=!1;else if(i.params.id&&i.fullPath.match(/\/page\/p/)){let e=localStorage.getItem(i.params.id);if(e){let t=JSON.parse(T.decode(e));d.value=t.map(n=>n.id),h(async()=>{await g(t)}),m.value=!0}v.value=!1}else v.value=!0});const g=async e=>{p.value.forEach((t,n)=>{if(t){const r=e[n];t.load(r.items)}else t.load({id:1,x:2,y:1,h:2})})},B=async e=>{await _.push({name:"createpage",params:{id:e}})},C=e=>{_.go(e)};return(e,t)=>{const n=A;return l(),c(S,null,[a("div",W,[a("div",K,[a("h1",Q,R(o.value.title),1)]),a("div",U,[f.value&&!m.value&&I.value?(l(),c("button",{key:0,onClick:t[0]||(t[0]=x(r=>B(o.value.id),["prevent"]))},[a("span",X,[y(n,{size:"25"})])])):w("",!0),f.value&&m.value?(l(),c("button",{key:1,onClick:t[1]||(t[1]=x(r=>C(-1),["prevent"])),class:"text-stone-200 font-bold py-2 px-4 rounded hover:text-white"},Z)):w("",!0)])]),a("div",ee,[(l(!0),c(S,null,G(d.value,(r,E)=>(l(),c("div",null,[(l(),z(L,null,{default:F(()=>[y(J,{id:r,ref_for:!0,ref:b(E),pageProps:o.value,pageStatic:f.value},null,8,["id","pageProps","pageStatic"])]),_:2},1024))]))),256)),te])],64)}}}),re=D(ae,[["__scopeId","data-v-a70fc6ef"]]);export{re as default};
